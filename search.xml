<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>fastapi-sqlmodel的使用</title>
    <url>/2025/02/05/fastapi-sqlmodel%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="0-SQLModel-是什么"><a href="#0-SQLModel-是什么" class="headerlink" title="0.SQLModel 是什么"></a>0.SQLModel 是什么</h1><p><strong>SQLModel 是一个用于从 Python 代码中使用 Python 对象与 SQL 数据库进行交互的库。它被设计为直观、易于使用、高度兼容且健壮。</strong><br><strong>换而言之，就是将 python 类转化为数据库中数据表及对象的工具</strong><br><strong>对应的(开发文档)[<a href="https://sqlmodel.tiangolo.com/">https://sqlmodel.tiangolo.com/</a>]</strong></p>
<h1 id="1-安装方式"><a href="#1-安装方式" class="headerlink" title="1.安装方式"></a>1.安装方式</h1><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"># 前提是在虚拟环境下, 安装sqlmodel以后他会一并安装其他依赖</span><br><span class="line">pip install sqlmodel</span><br></pre></td></tr></table></figure>
<h1 id="2-使用方式"><a href="#2-使用方式" class="headerlink" title="2. 使用方式"></a>2. 使用方式</h1><div class="note info modern"><p><strong>我们先来模拟一个场景，就拿电动车管理系统来举例</strong><br><strong>共八张表，分别为用户表(user),角色表(role),权限表(access),电动车表(machine),区域表(area),记录表(record)</strong><br><strong>用户角色表(userrolelink),角色权限表(roleaccesslink),</strong></p>
</div>
<h3 id="models-py"><a href="#models-py" class="headerlink" title="models.py"></a>models.py</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 引入的包</span></span><br><span class="line"><span class="keyword">from</span> sqlmodel <span class="keyword">import</span> SQLModel, Field, Relationship</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> JSON, Column</span><br><span class="line"><span class="keyword">import</span> uuid</span><br><span class="line"></span><br><span class="line"><span class="comment"># 基础字段</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BasicModel</span>(<span class="title class_ inherited__">SQLModel</span>):</span><br><span class="line">    create_by: uuid.UUID = Field(description=<span class="string">&quot;创建者&quot;</span>)</span><br><span class="line">    create_time: datetime = Field(default=datetime.utcnow(), description=<span class="string">&quot;创建时间&quot;</span>)</span><br><span class="line">    update_by: uuid.UUID = Field(description=<span class="string">&quot;更新者&quot;</span>)</span><br><span class="line">    update_time: datetime = Field(default=datetime.utcnow(), description=<span class="string">&quot;更新时间&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 多对多的关系</span></span><br><span class="line"><span class="comment"># table=True,他就代表是数据库中一张表，为false,就是一个Python类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserRoleLink</span>(BasicModel, table=<span class="literal">True</span>):</span><br><span class="line">    user_id: uuid.UUID = Field(foreign_key=<span class="string">&quot;user.user_id&quot;</span>, primary_key=<span class="literal">True</span>, description=<span class="string">&quot;用户ID&quot;</span>)</span><br><span class="line">    role_id: uuid.UUID = Field(foreign_key=<span class="string">&quot;role.role_id&quot;</span>, primary_key=<span class="literal">True</span>, description=<span class="string">&quot;角色ID&quot;</span>)</span><br><span class="line"></span><br><span class="line">    user: <span class="string">&quot;User&quot;</span> = Relationship(back_populates=<span class="string">&quot;user_role_links&quot;</span>)</span><br><span class="line">    role: <span class="string">&quot;Role&quot;</span> = Relationship(back_populates=<span class="string">&quot;user_links&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 一个角色对应多个权限,一个权限可对应多个角色</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RoleAccessLink</span>(BasicModel, table=<span class="literal">True</span>):</span><br><span class="line">    role_id: <span class="built_in">str</span> = Field(foreign_key=<span class="string">&quot;role.role_id&quot;</span>, primary_key=<span class="literal">True</span>, description=<span class="string">&quot;角色ID&quot;</span>)</span><br><span class="line">    access_id: <span class="built_in">str</span> = Field(foreign_key=<span class="string">&quot;access.access_id&quot;</span>, primary_key=<span class="literal">True</span>, description=<span class="string">&quot;权限ID&quot;</span>)</span><br><span class="line"></span><br><span class="line">    role: <span class="string">&quot;Role&quot;</span> = Relationship(back_populates=<span class="string">&quot;access_links&quot;</span>)</span><br><span class="line">    access: <span class="string">&quot;Access&quot;</span> = Relationship(back_populates=<span class="string">&quot;access_role_links&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>(BasicModel, table=<span class="literal">True</span>):</span><br><span class="line">    user_id: uuid.UUID = Field(primary_key=<span class="literal">True</span>, description=<span class="string">&quot;用户ID,用户的唯一标识&quot;</span>)</span><br><span class="line">    username: <span class="built_in">str</span> = Field(description=<span class="string">&quot;用户名&quot;</span>, index=<span class="literal">True</span>)</span><br><span class="line">    password: <span class="built_in">str</span> = Field(description=<span class="string">&quot;加密过后用户的密码&quot;</span>)</span><br><span class="line">    user_status: <span class="built_in">int</span> = Field(default=<span class="number">1</span>, description=<span class="string">&quot;用户状态,0为禁用状态,1为可用状态,2表示正在骑行状态&quot;</span>, index=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 附加的属性</span></span><br><span class="line">    user_role_links: <span class="built_in">list</span>[UserRoleLink] = Relationship(back_populates=<span class="string">&quot;user&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 一个用户对应多个角色，一个角色对应对个用户</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Role</span>(BasicModel, table=<span class="literal">True</span>):</span><br><span class="line">    role_id: <span class="built_in">str</span> = Field(primary_key=<span class="literal">True</span>, description=<span class="string">&quot;角色ID,角色的唯一标识&quot;</span>)</span><br><span class="line">    role_name: <span class="built_in">str</span> = Field(description=<span class="string">&quot;角色名&quot;</span>)</span><br><span class="line">    role_desc: <span class="built_in">str</span> | <span class="literal">None</span> = Field(description=<span class="string">&quot;角色描述&quot;</span>, default=<span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line">    user_links: <span class="built_in">list</span>[UserRoleLink] = Relationship(back_populates=<span class="string">&quot;role&quot;</span>)</span><br><span class="line">    access_links: <span class="built_in">list</span>[RoleAccessLink] = Relationship(back_populates=<span class="string">&quot;role&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Access</span>(BasicModel, table=<span class="literal">True</span>):</span><br><span class="line">    access_id: <span class="built_in">str</span> = Field(primary_key=<span class="literal">True</span>, description=<span class="string">&quot;权限ID,权限的唯一标识&quot;</span>)</span><br><span class="line">    access_name: <span class="built_in">str</span> = Field(description=<span class="string">&quot;权限名&quot;</span>)</span><br><span class="line">    access_desc: <span class="built_in">str</span> | <span class="literal">None</span> = Field(description=<span class="string">&quot;权限描述&quot;</span>, default=<span class="literal">None</span>)</span><br><span class="line">    access_url: <span class="built_in">str</span> | <span class="literal">None</span> = Field(description=<span class="string">&quot;权限URL&quot;</span>, default=<span class="literal">None</span>)</span><br><span class="line">    parent_id: <span class="built_in">str</span> | <span class="literal">None</span> = Field(description=<span class="string">&quot;父亲ID&quot;</span>, default=<span class="literal">None</span>)</span><br><span class="line">    is_menu: <span class="built_in">bool</span> = Field(description=<span class="string">&quot;是否为菜单&quot;</span>, default=<span class="literal">False</span>)</span><br><span class="line">    is_verify: <span class="built_in">bool</span> = Field(description=<span class="string">&quot;是否需要验证&quot;</span>, default=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    access_role_links: <span class="built_in">list</span>[RoleAccessLink] = Relationship(back_populates=<span class="string">&quot;access&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Machine</span>(BasicModel, table=<span class="literal">True</span>):</span><br><span class="line">    machine_id: uuid.UUID = Field(primary_key=<span class="literal">True</span>, description=<span class="string">&quot;电动车ID,电动车的唯一标识&quot;</span>)</span><br><span class="line">    machine_point: <span class="built_in">dict</span> | <span class="literal">None</span> = Field(default=<span class="literal">None</span>, description=<span class="string">&quot;电动车位置&quot;</span>, sa_column=Column(JSON)) <span class="comment"># json类型</span></span><br><span class="line">    machine_battery: <span class="built_in">int</span> = Field(default=<span class="number">100</span>, description=<span class="string">&quot;电动车电量&quot;</span>)</span><br><span class="line">    status: <span class="built_in">int</span> = Field(default=<span class="number">1</span>, description=<span class="string">&quot;电动车状态,0为正在骑行中,1为空闲状态,2为损坏,3为正在停止&quot;</span>)</span><br><span class="line">    machine_photo: <span class="built_in">str</span> | <span class="literal">None</span> = Field(default=<span class="literal">None</span>, description=<span class="string">&quot;电动车照片&quot;</span>)</span><br><span class="line"></span><br><span class="line">    area_id: <span class="built_in">str</span> = Field(foreign_key=<span class="string">&quot;area.area_id&quot;</span>, description=<span class="string">&quot;区域ID&quot;</span>)</span><br><span class="line">    area: <span class="string">&quot;Area&quot;</span> = Relationship(back_populates=<span class="string">&quot;machines&quot;</span>)</span><br><span class="line">    record: <span class="built_in">list</span>[<span class="string">&quot;Record&quot;</span>] = Relationship(back_populates=<span class="string">&quot;machine&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Area</span>(BasicModel, table=<span class="literal">True</span>):</span><br><span class="line">    area_id: <span class="built_in">str</span> = Field(primary_key=<span class="literal">True</span>, description=<span class="string">&quot;区域ID,区域的唯一标识&quot;</span>)</span><br><span class="line">    area_name: <span class="built_in">str</span> | <span class="literal">None</span> = Field(default=<span class="literal">None</span>, description=<span class="string">&quot;区域名&quot;</span>)</span><br><span class="line">    area_desc: <span class="built_in">str</span> | <span class="literal">None</span> = Field(default=<span class="literal">None</span>, description=<span class="string">&quot;区域描述&quot;</span>)</span><br><span class="line"></span><br><span class="line">    machines: <span class="built_in">list</span>[Machine] = Relationship(back_populates=<span class="string">&quot;area&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Record</span>(BasicModel, table=<span class="literal">True</span>):</span><br><span class="line">    record_id: uuid.UUID = Field(primary_key=<span class="literal">True</span>, description=<span class="string">&quot;记录ID,记录的唯一标识&quot;</span>)</span><br><span class="line">    start_time: datetime | <span class="literal">None</span> = Field(default=<span class="literal">None</span>, description=<span class="string">&quot;开始时间&quot;</span>)</span><br><span class="line">    end_time: datetime | <span class="literal">None</span> = Field(default=datetime.utcnow(), description=<span class="string">&quot;结束时间&quot;</span>)</span><br><span class="line">    stop_time:<span class="built_in">int</span> = Field(default=<span class="number">0</span>, description=<span class="string">&quot;停车时间&quot;</span>)</span><br><span class="line">    consume_battery: <span class="built_in">int</span> = Field(default=<span class="number">0</span>, description=<span class="string">&quot;消耗电量&quot;</span>)</span><br><span class="line">    tracejectory: <span class="built_in">dict</span> | <span class="literal">None</span> = Field(default=<span class="literal">None</span>, description=<span class="string">&quot;轨迹&quot;</span>, sa_column=Column(JSON))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 附加属性</span></span><br><span class="line">    user_id: <span class="built_in">str</span> = Field(foreign_key=<span class="string">&quot;user.user_id&quot;</span>, description=<span class="string">&quot;用户ID&quot;</span>)</span><br><span class="line">    user: User = Relationship(back_populates=<span class="string">&quot;records&quot;</span>)</span><br><span class="line">    machine_id: <span class="built_in">str</span> = Field(foreign_key=<span class="string">&quot;machine.machine_id&quot;</span>, description=<span class="string">&quot;电动车ID&quot;</span>)</span><br><span class="line">    machine: Machine = Relationship(back_populates=<span class="string">&quot;records&quot;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="mysql-配置文件"><a href="#mysql-配置文件" class="headerlink" title="mysql 配置文件"></a>mysql 配置文件</h3><h3 id="mysql-py"><a href="#mysql-py" class="headerlink" title="mysql.py"></a>mysql.py</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 这里的settings.属性更换成自己的变量即可</span></span><br><span class="line"><span class="keyword">from</span> sqlmodel <span class="keyword">import</span> SQLModel, create_engine</span><br><span class="line"><span class="keyword">from</span> config <span class="keyword">import</span> settings</span><br><span class="line"><span class="keyword">from</span> models.models <span class="keyword">import</span> User, Role, Machine, Record, Access, UserRoleLink, RoleAccessLink, Area</span><br><span class="line"></span><br><span class="line">engine = create_engine(<span class="string">f&quot;mysql+pymysql://<span class="subst">&#123;settings.MYSQL_USER&#125;</span>:<span class="subst">&#123;settings.MYSQL_PASSWORD&#125;</span>@<span class="subst">&#123;settings.MYSQL_IP&#125;</span>:<span class="subst">&#123;settings.MYSQL_PORT&#125;</span>/<span class="subst">&#123;settings.MYSQL_DATABASE&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">register</span>():</span><br><span class="line">    SQLModel.metadata.create_all(engine)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="3-启动方式"><a href="#3-启动方式" class="headerlink" title="3.启动方式"></a>3.启动方式</h1><h3 id="Events-py"><a href="#Events-py" class="headerlink" title="Events.py"></a>Events.py</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">Callable</span></span><br><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI</span><br><span class="line"><span class="keyword">from</span> database.mysql <span class="keyword">import</span> register <span class="comment">#这个是上面的mysql配置文件，只是存放可能不同</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">startup</span>(<span class="params">app: FastAPI</span>) -&gt; <span class="type">Callable</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Fastapi启动事件</span></span><br><span class="line"><span class="string">    :param app: FastAPI</span></span><br><span class="line"><span class="string">    :return: start_app</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">app_start</span>() -&gt; <span class="literal">None</span>:</span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;------fsray-api start------&quot;</span>)</span><br><span class="line">        <span class="comment"># 数据库注册</span></span><br><span class="line">        <span class="keyword">await</span> register()</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">return</span> app_start</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">stopping</span>(<span class="params">app: FastAPI</span>) -&gt; <span class="type">Callable</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Fastapi停止事件</span></span><br><span class="line"><span class="string">    :param app: FastAPI</span></span><br><span class="line"><span class="string">    :return: stop_app</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">stop_app</span>() -&gt; <span class="literal">None</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;------fsray-api stop------&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> stop_app</span><br></pre></td></tr></table></figure>
<h3 id="main-py"><a href="#main-py" class="headerlink" title="main.py"></a>main.py</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI</span><br><span class="line"><span class="keyword">from</span> config <span class="keyword">import</span> settings</span><br><span class="line"><span class="keyword">from</span> core <span class="keyword">import</span> Events</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">application = FastAPI(</span><br><span class="line">    debug=settings.APP_DEBUG, <span class="comment">#调试模式</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 事件监听</span></span><br><span class="line">application.add_event_handler(<span class="string">&quot;startup&quot;</span>, Events.startup(application))</span><br><span class="line">application.add_event_handler(<span class="string">&quot;shutdown&quot;</span>, Events.stopping(application))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app = application</span><br></pre></td></tr></table></figure>
<p><strong>最后在 cmd 窗口执行下面命令启动 fastapi 应用,即可看到数据表已经在数据库中了</strong><br><strong>如果想要增添数据表直接增添 models 类</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">uvicorn main:app --reload</span><br></pre></td></tr></table></figure>
<div class="note success flat"><p>到这里教程就已圆满结束了，感谢你的浏览，thank you</p>
</div>


<style>
#web_bg{
  background: url(https://cdn.statically.io/gh/lingdubing-xo/lingdubing-xo-pic/main/img/c950811657d44cf4cea4c2a810eb913e.jpg)!important;
  /*重新定义background会导致原有定位属性失效，所以也需要再声明一次加权的定位属性*/
  background-position: center !important;
  background-size: cover !important;
  background-repeat: no-repeat !important;
}
</style>


]]></content>
      <categories>
        <category>Python Web开发</category>
      </categories>
      <tags>
        <tag>开发</tag>
      </tags>
  </entry>
  <entry>
    <title>vercel配置</title>
    <url>/2025/02/03/vercel%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="0-Vercel-是什么"><a href="#0-Vercel-是什么" class="headerlink" title="0.Vercel 是什么"></a>0.Vercel 是什么</h1><p><strong>vercel 是一个网站托管服务，类似与 github page，可以部署静态网站, 我用它来部署 hexo 博客, 这个博客即为 vercel 部署</strong></p>
<h1 id="1-安装方式"><a href="#1-安装方式" class="headerlink" title="1.安装方式"></a>1.安装方式</h1><h3 id="第一步-登录到vercel-网站上，同时你需要有一个-github-账户，且里面有你需要部署的项目"><a href="#第一步-登录到vercel-网站上，同时你需要有一个-github-账户，且里面有你需要部署的项目" class="headerlink" title="第一步, 登录到vercel 网站上，同时你需要有一个 github 账户，且里面有你需要部署的项目"></a>第一步, 登录到<a href="https://vercel.com/">vercel 网站</a>上，同时你需要有一个 github 账户，且里面有你需要部署的项目</h3><h3 id="第二步-关联上-github-的账户-Add-New-Project-选择要引入的项目，它会自动帮你部署"><a href="#第二步-关联上-github-的账户-Add-New-Project-选择要引入的项目，它会自动帮你部署" class="headerlink" title="第二步, 关联上 github 的账户,Add New Project,选择要引入的项目，它会自动帮你部署"></a>第二步, 关联上 github 的账户,Add New Project,选择要引入的项目，它会自动帮你部署</h3><h3 id="第三步-打开设置里的-Domains-Add-新的-domain-选择自己的域名-然后选第三个选项添加"><a href="#第三步-打开设置里的-Domains-Add-新的-domain-选择自己的域名-然后选第三个选项添加" class="headerlink" title="第三步, 打开设置里的 Domains, Add 新的 domain,选择自己的域名, 然后选第三个选项添加"></a>第三步, 打开设置里的 Domains, Add 新的 domain,选择自己的域名, 然后选第三个选项添加</h3><h3 id="第四步-到对应的域名购买的平台进行域名解析-解析完以后回到-Vercel-刷新它差不多就配置好了-现在就可以通过域名访问项目了"><a href="#第四步-到对应的域名购买的平台进行域名解析-解析完以后回到-Vercel-刷新它差不多就配置好了-现在就可以通过域名访问项目了" class="headerlink" title="第四步, 到对应的域名购买的平台进行域名解析, 解析完以后回到 Vercel 刷新它差不多就配置好了,现在就可以通过域名访问项目了"></a>第四步, 到对应的域名购买的平台进行域名解析, 解析完以后回到 Vercel 刷新它差不多就配置好了,现在就可以通过域名访问项目了</h3><div class="note success flat"><p>到这里教程就已圆满结束了，感谢你的浏览，thank you</p>
</div>


<style>
#web_bg{
  background: url(https://raw.githubusercontent.com/lingdubing-xo/lingdubing-xo-pic/refs/heads/main/img/015fb860bf0e6711013eaf706a25af.webp)!important;
  /*重新定义background会导致原有定位属性失效，所以也需要再声明一次加权的定位属性*/
  background-position: center !important;
  background-size: cover !important;
  background-repeat: no-repeat !important;
}
</style>


]]></content>
      <categories>
        <category>Hexo搭建</category>
      </categories>
      <tags>
        <tag>运维</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo配置live2d看板娘</title>
    <url>/2025/02/05/hexo%E9%85%8D%E7%BD%AElive2d%E7%9C%8B%E6%9D%BF%E5%A8%98/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h4 id="预览效果"><a href="#预览效果" class="headerlink" title="预览效果"></a>预览效果</h4><div class="hide-block"><button type="button" class="hide-button" style="background-color:  blue;">点我预览</button><div class="hide-content"><p>这里有张图片：<br><img src="https://cdn.statically.io/gh/lingdubing-xo/lingdubing-xo-pic/main/%E5%8D%9A%E5%AE%A2/%E9%85%8D%E7%BD%AElive2d%E7%9C%8B%E6%9D%BF%E5%A8%98/seven.png" alt="image (1)" style="zoom:67%;" /></p>
</div></div>
<h1 id="0-用到的地址"><a href="#0-用到的地址" class="headerlink" title="0.用到的地址"></a>0.用到的地址</h1><p>(<strong>oh-my-live2d Github 地址</strong>)[<a href="https://github.com/oh-my-live2d/oh-my-live2d">https://github.com/oh-my-live2d/oh-my-live2d</a>]<br>(<strong>oh-my-live2d 官网 地址</strong>)[<a href="https://oml2d.hacxy.cn/">https://oml2d.hacxy.cn/</a>]<br>(<strong>live2d 模型下载 地址</strong>)[<a href="https://github.com/Eikanya/Live2d-model/tree/master">https://github.com/Eikanya/Live2d-model/tree/master</a>]<br>(<strong>静态文件 Statically 地址</strong>)[<a href="https://statically.io/convert/">https://statically.io/convert/</a>]<br>(<strong>DownGit Github 文件夹下载器 地址</strong>)[<a href="https://minhaskamal.github.io/DownGit/#/home">https://minhaskamal.github.io/DownGit/#/home</a>]</p>
<h1 id="1-前言"><a href="#1-前言" class="headerlink" title="1.前言"></a>1.前言</h1><div class="note info simple"><p>需搭配 Hexo 使用，我目前使用的 hexo 版本为 <wavy>7.3.0</wavy>，教程很简单，可能需要自备魔法</p>
</div>
<div class="note primary modern"><p>我使用的是 <wavy>hexo-oh-my-live2d</wavy>，可能有的人之前使用的是 hexo-live2d-helper，但是由于这个 helper 不再维护了，支持的模型较少。<br>所以我们采用这个新的库，它正在积极维护且支持所有模型<br>视频教程在<emp><a href="https://www.bilibili.com/video/BV1ptPkebEqZ/?spm_id_from=333.1387.homepage.video_card.click">https://www.bilibili.com/video/BV1ptPkebEqZ/?spm_id_from=333.1387.homepage.video_card.click</a></emp></p>
</div>
<h1 id="2-安装"><a href="#2-安装" class="headerlink" title="2.安装"></a>2.安装</h1><h3 id="1-安装-hexo-oh-my-live2d-插件"><a href="#1-安装-hexo-oh-my-live2d-插件" class="headerlink" title="1. 安装 hexo-oh-my-live2d 插件"></a>1. 安装 hexo-oh-my-live2d 插件</h3><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"># 在 hexo 根目录 <span class="built_in">cmd</span> 下输入如下命令</span><br><span class="line"># 这里使用的是yarn命令，跟npm命令起到的效果是一样的</span><br><span class="line">yarn add hexo-oh-my-live2d --save</span><br></pre></td></tr></table></figure>
<h3 id="2-配置样式文件"><a href="#2-配置样式文件" class="headerlink" title="2. 配置样式文件"></a>2. 配置样式文件</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 这hexo的config.yml文件下增添以下内容</span></span><br><span class="line"><span class="comment"># 下面的path路径即为你想要使用模型的model地址</span></span><br><span class="line"><span class="comment"># live2d看板娘</span></span><br><span class="line"><span class="attr">OhMyLive2d:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">CDN:</span> <span class="string">https://registry.npmmirror.com/oh-my-live2d/latest/files</span></span><br><span class="line">  <span class="comment"># CDN: https://registry.npmmirror.com/oh-my-live2d/0.13/files/dist/index.min.js</span></span><br><span class="line">  <span class="attr">option:</span></span><br><span class="line">    <span class="comment"># importType: &#x27;cubism2&#x27; #  导入类型, 默认使用全量导入: complete , 可选值: complete, cubism2, cubism5</span></span><br><span class="line">    <span class="attr">libraryUrls:</span> <span class="comment"># 自定义 Cubism SDK 外部资源地址</span></span><br><span class="line">      <span class="attr">complete:</span> <span class="string">https://registry.npmmirror.com/oh-my-live2d/latest/files/lib/complete.js</span></span><br><span class="line">      <span class="attr">cubism2:</span> <span class="string">https://registry.npmmirror.com/oh-my-live2d/latest/files/lib/cubism2.js</span></span><br><span class="line">      <span class="attr">cubism5:</span> <span class="string">https://registry.npmmirror.com/oh-my-live2d/latest/files/lib/cubism5.js</span></span><br><span class="line">    <span class="comment"># menus:</span></span><br><span class="line">    <span class="comment"># items: |</span></span><br><span class="line">    <span class="comment">#   (defaultItems)=&gt;&#123;</span></span><br><span class="line">    <span class="comment">#    return [</span></span><br><span class="line">    <span class="comment">#      ...defaultItems,</span></span><br><span class="line">    <span class="comment">#      &#123;</span></span><br><span class="line">    <span class="comment">#        id: &#x27;github&#x27;,</span></span><br><span class="line">    <span class="comment">#        icon: &#x27;github-fill&#x27;,</span></span><br><span class="line">    <span class="comment">#        title: &#x27;我的github&#x27;,</span></span><br><span class="line">    <span class="comment">#        onClick: ()=&gt;window.open(&#x27;https://github.com/hacxy&#x27;)</span></span><br><span class="line">    <span class="comment">#      &#125;</span></span><br><span class="line">    <span class="comment">#    ]</span></span><br><span class="line">    <span class="comment">#   &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># items:</span></span><br><span class="line">    <span class="comment">#   - id: &#x27;github&#x27;</span></span><br><span class="line">    <span class="comment">#     icon: &#x27;github-fill&#x27;</span></span><br><span class="line">    <span class="comment">#     title: &#x27;我的github&#x27;</span></span><br><span class="line">    <span class="comment">#     onClick: ()=&gt;window.open(&#x27;https://github.com/hacxy&#x27;)</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">mobileDisplay:</span> <span class="literal">false</span> <span class="comment"># 是否在移动端显示</span></span><br><span class="line">    <span class="attr">models:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">&quot;https://cdn.statically.io/gh/lingdubing-xo/lingdubing-xo-pic/main/%E5%8A%A0%E8%97%A4%E6%83%A0live2d/model/katou_01/katou_01.model.json&quot;</span></span><br><span class="line">        <span class="attr">mobilePosition:</span> [<span class="number">-10</span>, <span class="number">23</span>] <span class="comment"># 移动端时模型在舞台中的位置。 默认值: [0,0] [横坐标, 纵坐标]</span></span><br><span class="line">        <span class="attr">mobileScale:</span> <span class="number">0.1</span> <span class="comment"># 移动端时模型的缩放比例 默认值: 0.1</span></span><br><span class="line">        <span class="attr">mobileStageStyle:</span> <span class="comment"># 移动端时舞台的样式</span></span><br><span class="line">          <span class="attr">width:</span> <span class="number">180</span></span><br><span class="line">          <span class="attr">height:</span> <span class="number">166</span></span><br><span class="line">        <span class="attr">motionPreloadStrategy:</span> <span class="string">IDLE</span> <span class="comment"># 动作预加载策略 默认值: IDLE 可选值: ALL | IDLE | NONE</span></span><br><span class="line">        <span class="attr">position:</span> [<span class="number">20</span>, <span class="number">-150</span>] <span class="comment"># 模型在舞台中的位置。 默认值: [0,0] [横坐标, 纵坐标]</span></span><br><span class="line">        <span class="attr">scale:</span> <span class="number">0.15</span> <span class="comment"># 模型的缩放比例 默认值: 0.1</span></span><br><span class="line">        <span class="comment"># showHitAreaFrames: true # 是否显示点击区域 默认值: false</span></span><br><span class="line">        <span class="attr">stageStyle:</span></span><br><span class="line">          <span class="attr">width:</span> <span class="number">250</span></span><br><span class="line">          <span class="attr">height:</span> <span class="number">250</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">&quot;https://cdn.statically.io/gh/lingdubing-xo/lingdubing-xo-pic/main/%E7%BA%B1%E9%9B%BElive2d/model/sagiri/sagiri.model.json&quot;</span></span><br><span class="line">        <span class="attr">scale:</span> <span class="number">0.12</span></span><br><span class="line">        <span class="attr">position:</span> [<span class="number">30</span>, <span class="number">0</span>]</span><br><span class="line">        <span class="attr">stageStyle:</span></span><br><span class="line">          <span class="attr">width:</span> <span class="number">250</span></span><br><span class="line">        <span class="attr">mobileScale:</span> <span class="number">0.08</span></span><br><span class="line">        <span class="attr">mobilePosition:</span> [<span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">        <span class="attr">mobileStageStyle:</span> <span class="comment"># 移动端时舞台的样式</span></span><br><span class="line">          <span class="attr">width:</span> <span class="number">180</span></span><br><span class="line">    <span class="attr">parentElement:</span> <span class="string">document.body</span> <span class="comment">#为组件提供一个父元素，如果未指定则默认挂载到 body 中</span></span><br><span class="line">    <span class="attr">primaryColor:</span> <span class="string">&quot;var(--btn-bg)&quot;</span> <span class="comment"># 主题色 支持变量</span></span><br><span class="line">    <span class="attr">sayHello:</span> <span class="literal">false</span> <span class="comment"># 是否在初始化阶段打印项目信息</span></span><br><span class="line">    <span class="attr">tips:</span></span><br><span class="line">      <span class="attr">style:</span></span><br><span class="line">        <span class="attr">width:</span> <span class="number">230</span></span><br><span class="line">        <span class="attr">height:</span> <span class="number">120</span></span><br><span class="line">        <span class="attr">left:</span> <span class="string">calc(50%</span> <span class="bullet">-</span> <span class="string">20px)</span></span><br><span class="line">        <span class="attr">top:</span> <span class="string">-100px</span></span><br><span class="line">      <span class="attr">mobileStyle:</span></span><br><span class="line">        <span class="attr">width:</span> <span class="number">180</span></span><br><span class="line">        <span class="attr">height:</span> <span class="number">80</span></span><br><span class="line">        <span class="attr">left:</span> <span class="string">calc(50%</span> <span class="bullet">-</span> <span class="string">30px)</span></span><br><span class="line">        <span class="attr">top:</span> <span class="string">-100px</span></span><br><span class="line">      <span class="attr">idleTips:</span></span><br><span class="line">        <span class="attr">interval:</span> <span class="number">15000</span></span><br><span class="line">        <span class="comment"># message:</span></span><br><span class="line">        <span class="comment">#   - 你好呀~</span></span><br><span class="line">        <span class="comment">#   - 欢迎来到我的小站~</span></span><br><span class="line">        <span class="comment"># 自定义提示语 需要 引入 axios 库 ,也可以使用其他方法</span></span><br><span class="line">        <span class="attr">message:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          function()&#123;</span></span><br><span class="line"><span class="string">            return axios.get(&#x27;https://v1.hitokoto.cn?c=i&#x27;)</span></span><br><span class="line"><span class="string">              .then(function (response) &#123;</span></span><br><span class="line"><span class="string">                return response.data.hitokoto ;</span></span><br><span class="line"><span class="string">              &#125;)</span></span><br><span class="line"><span class="string">              .catch(function (error) &#123;</span></span><br><span class="line"><span class="string">                console.error(error);</span></span><br><span class="line"><span class="string">              &#125;);</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string"></span>        <span class="comment"># wordTheDay: true</span></span><br><span class="line">        <span class="comment"># 自定义  https://v1.hitokoto.cn  数据</span></span><br><span class="line">        <span class="comment"># wordTheDay: |</span></span><br><span class="line">        <span class="comment">#   function(wordTheDayData)&#123;</span></span><br><span class="line">        <span class="comment">#     return `$&#123;wordTheDayData.hitokoto&#125;    by.$&#123;wordTheDayData.from&#125;`;</span></span><br><span class="line">        <span class="comment">#   &#125;</span></span><br><span class="line">  <span class="comment"># then: |</span></span><br><span class="line">  <span class="comment">#   (oml2d)=&gt;&#123;</span></span><br><span class="line">  <span class="comment">#      setTimeout(() =&gt; &#123;</span></span><br><span class="line">  <span class="comment">#     oml2d.tipsMessage(&#x27;hello world&#x27;, 3000, 10);</span></span><br><span class="line">  <span class="comment">#   &#125;, 8000);</span></span><br><span class="line">  <span class="comment">#   &#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-配置-github-资源床"><a href="#3-配置-github-资源床" class="headerlink" title="3.配置 github 资源床"></a>3.配置 github 资源床</h3><p><strong>1.进入到 github 官网上创建一个<wavy>公开的</wavy>项目</strong><br><strong>2.将 github 创建的项目拉到本地，在本地创建一个存储文件的文件夹</strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"># github拉到本地</span><br><span class="line">git pull 仓库位置</span><br></pre></td></tr></table></figure>
<h3 id="4-下载想要的模型"><a href="#4-下载想要的模型" class="headerlink" title="4.下载想要的模型"></a>4.下载想要的模型</h3><p>到(<strong>live2d 模型下载 地址</strong>)[<a href="https://github.com/Eikanya/Live2d-model/tree/master]下载想要的模型">https://github.com/Eikanya/Live2d-model/tree/master]下载想要的模型</a><br><strong>要是压缩包直接下载到本地即可，有些模型是文件夹格式的直接下载不下来的话，可以使用(DownGit 工具)[<a href="https://minhaskamal.github.io/DownGit/#/home]将文件夹的地址复制上去然后下载，保存到刚才创建的那个存储文件的文件夹里">https://minhaskamal.github.io/DownGit/#/home]将文件夹的地址复制上去然后下载，保存到刚才创建的那个存储文件的文件夹里</a></strong></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"># 然后将下载的本地资源上传到github上</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;你想要加的注释&quot;</span><br><span class="line">git push</span><br></pre></td></tr></table></figure>
<div class="img-wrap"><div class="img-bg"><img class="img" src="https://cdn.statically.io/gh/lingdubing-xo/lingdubing-xo-pic/main/%E5%8D%9A%E5%AE%A2/%E9%85%8D%E7%BD%AElive2d%E7%9C%8B%E6%9D%BF%E5%A8%98/two.png" style="width:600px;"/></div></div>
<div class="img-wrap"><div class="img-bg"><img class="img" src="https://cdn.statically.io/gh/lingdubing-xo/lingdubing-xo-pic/main/%E5%8D%9A%E5%AE%A2/%E9%85%8D%E7%BD%AElive2d%E7%9C%8B%E6%9D%BF%E5%A8%98/three.png" style="width:600px;"/></div></div>
<div class="img-wrap"><div class="img-bg"><img class="img" src="https://cdn.statically.io/gh/lingdubing-xo/lingdubing-xo-pic/main/%E5%8D%9A%E5%AE%A2/%E9%85%8D%E7%BD%AElive2d%E7%9C%8B%E6%9D%BF%E5%A8%98/four.png" style="width:600px;"/></div></div>
<div class="img-wrap"><div class="img-bg"><img class="img" src="https://cdn.statically.io/gh/lingdubing-xo/lingdubing-xo-pic/main/%E5%8D%9A%E5%AE%A2/%E9%85%8D%E7%BD%AElive2d%E7%9C%8B%E6%9D%BF%E5%A8%98/five.png" style="width:600px;"/></div></div>
<h3 id="5-使用-Statically-做代理"><a href="#5-使用-Statically-做代理" class="headerlink" title="5.使用 Statically 做代理"></a>5.使用 Statically 做代理</h3><p><strong>*到(</strong>静态文件 Statically 地址<strong>)[<a href="https://statically.io/convert/]输入你">https://statically.io/convert/]输入你</a> github 上模型的文件地址，一般为 model.json 结尾*</strong></p>
<div class="img-wrap"><div class="img-bg"><img class="img" src="https://cdn.statically.io/gh/lingdubing-xo/lingdubing-xo-pic/main/%E5%8D%9A%E5%AE%A2/%E9%85%8D%E7%BD%AElive2d%E7%9C%8B%E6%9D%BF%E5%A8%98/six.png" style="width:600px;"/></div></div>
<p><strong>更改 config.yml 文件下的 path 路径即可修改模型</strong></p>
<h1 id="3-自定义模型设置-几个重要的参数"><a href="#3-自定义模型设置-几个重要的参数" class="headerlink" title="3.自定义模型设置(几个重要的参数)"></a>3.自定义模型设置(几个重要的参数)</h1><ul>
<li><strong>如果一个模型有多个衣服的话。path 路径要设置为一个数据形式，如我 config.yml 设置的那样</strong></li>
<li><strong>dockedPosition 是设置模型在网页左边或者右边</strong></li>
<li><strong>如果模型位置不恰当，请调整 position 属性,第一个为 x 轴，第二个为 y 轴，正数是向左向上，负数是向右向下</strong></li>
</ul>
<div class="note success flat"><p>到这里教程就已圆满结束了，感谢你的浏览，thank you</p>
</div>


<style>
#web_bg{
  background: url(https://cdn.statically.io/gh/lingdubing-xo/lingdubing-xo-pic/main/img/v2-203555703cee494d6b6b05a8b80b1db7_r.jpg)!important;
  /*重新定义background会导致原有定位属性失效，所以也需要再声明一次加权的定位属性*/
  background-position: center !important;
  background-size: cover !important;
  background-repeat: no-repeat !important;
}
</style>


]]></content>
      <categories>
        <category>Hexo搭建</category>
      </categories>
      <tags>
        <tag>开发</tag>
      </tags>
  </entry>
  <entry>
    <title>napcat结合koishi制作qq机器人插件</title>
    <url>/2025/02/02/napcat%E7%BB%93%E5%90%88koishi/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>注:这篇教程是 2025-02-02 所创，所著内容对以后不一定有效，仅提供借鉴参考意义，相关<a href="https://www.bilibili.com/video/BV1PGFXe1E3G/?spm_id_from=333.1387.homepage.video_card.click&amp;vd_source=540b90b530334be98a9c1f8721345cef">视频教程</a></p>
<h2 id="第一步下载-napcat"><a href="#第一步下载-napcat" class="headerlink" title="第一步下载 napcat"></a>第一步下载 napcat</h2><p>napcat 的<a href="https://napneko.github.io/">官网地址</a>,下载最新的压缩包，保证你现在电脑 qq 是最新版本的</p>
]]></content>
      <categories>
        <category>QQ机器人</category>
      </categories>
      <tags>
        <tag>开发</tag>
      </tags>
  </entry>
</search>
